---
layout: page
title: Library
permalink: /library/
---

<input type="text" id="search-box" placeholder="Search posts..." style="width: 100%; padding: 0.5rem; margin-bottom: 1rem;">

<div class="posts" id="search-results"></div>

<script>
  let postsData = [];

  // Fetch all posts from search.json
  fetch('/search.json')
    .then(res => res.json())
    .then(data => {
      postsData = data.sort((a, b) => new Date(b.date) - new Date(a.date));
      renderPosts(postsData.slice(0, 10)); // Show first 10 posts initially
    });

  const searchBox = document.getElementById('search-box');
  const searchResults = document.getElementById('search-results');

  searchBox.addEventListener('input', () => {
    const term = searchBox.value.toLowerCase().trim();
    if (!term) {
      renderPosts(postsData.slice(0, 10)); // Reset to first 10 posts if empty
      return;
    }

    // Filter posts by title, excerpt, or content
    const filtered = postsData.filter(post =>
      post.title.toLowerCase().includes(term) ||
      post.excerpt.toLowerCase().includes(term) ||
      post.content.toLowerCase().includes(term)
    );

    renderPosts(filtered);
  });

  function renderPosts(posts) {
    searchResults.innerHTML = '';
    if (posts.length === 0) {
      searchResults.innerHTML = '<p>No posts found.</p>';
      return;
    }
    posts.forEach(post => {
      searchResults.insertAdjacentHTML('beforeend', `
        <article>
          <h2><a href="${post.url}">${post.title}</a></h2>
          <p>${post.excerpt}</p>
          <a href="${post.url}">Read more</a>
        </article>
      `);
    });
  }
</script>
